"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("warning"),t=require("react"),n=require("d3-array");function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=r(e),a=r(t);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}}(e,t)||D(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||D(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){if(e){if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var w="react-compound-slider:";function T(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,n){return t.val>n.val?e?-1:1:n.val>t.val?e?1:-1:0}}function E(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=e.findIndex((function(e){return e.key===t}));if(-1!==o){var a=e[o],i=a.key,u=a.val;return u===n?e:[].concat(b(e.slice(0,o)),[{key:i,val:n}],b(e.slice(o+1))).sort(T(r))}return e}function S(e,t){if(!e)return[0,0];var n=e.getBoundingClientRect();return[t?n.top:n.left,t?n.bottom:n.right]}function M(e){var t=e.type,n=e.touches;return!n||n.length>1||"touchend"===(void 0===t?"":t).toLowerCase()&&n.length>0}function P(e,t){return e?t.touches[0].clientY:t.touches[0].pageX}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=0,i=e.map((function(e){var t=n.getValue(e);return e!==t&&(a+=1,o.default(!r,"".concat(w," Invalid value encountered. Changing ").concat(e," to ").concat(t,"."))),t})).map((function(e,t){return{key:"$$-".concat(t),val:e}})).sort(T(t));return{handles:i,changes:a}}function I(e,t){return t}function j(e,t){for(var n=0;n<e.length;n++){if(e[n].key!==t[n].key)return e;if(t[n+1]&&t[n].val===t[n+1].val)return e}return t}function H(e,t,n,r,o){for(var a=-1,i=!0,u=0;u<e.length;u++){var l=e[u],c=t[u];if(!c||c.key!==l.key)return e;c.val!==l.val&&(a=u,i=c.val-l.val>0)}if(-1===a)return e;for(var s=i?n:-n,v=0;v<t.length;v++){var d=t[v],f=t[v+1];if(f&&d.val===f.val){if(v===a){var p=f.val+s;if(o(p)===p){var h=H(t,E(t,f.key,f.val+s,r),n,r,o);return h===t?e:h}return e}var m=d.val+s;if(o(m)===m){var y=H(t,E(t,d.key,d.val+s,r),n,r,o);return y===t?e:y}return e}}return t}function x(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.forEach((function(t){return t&&t(e)}))}}var C=function(){return{value:0,percent:0}},R=function(e){d(r,t.Component);var n=y(r);function r(){var e;l(this,r);for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return(e=n.call.apply(n,[this].concat(o))).getRailProps=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.props,r=n.emitMouse,o=n.emitTouch;return u(u({},t),{},{onMouseDown:x(t&&t.onMouseDown,r),onTouchStart:x(t&&t.onTouchStart,o)})},e}return s(r,[{key:"render",value:function(){var e=this.props,t=e.activeHandleID,n=(0,e.children)({getEventData:e.getEventData||C,activeHandleID:void 0===t?"":t,getRailProps:this.getRailProps});return n&&a.default.Children.only(n)}}]),r}(),A=function(e){d(r,t.Component);var n=y(r);function r(){var e;l(this,r);for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return(e=n.call.apply(n,[this].concat(o))).autofocus=function(e){e.target instanceof HTMLElement&&e.target.focus()},e.getHandleProps=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.props,o=r.emitKeyboard,a=r.emitMouse,i=r.emitTouch;return u(u({},n),{},{onKeyDown:x(n&&n.onKeyDown,(function(e){return o&&o(e,t)})),onMouseDown:x(n&&n.onMouseDown,e.autofocus,(function(e){return a&&a(e,t)})),onTouchStart:x(n&&n.onTouchStart,(function(e){return i&&i(e,t)}))})},e}return s(r,[{key:"render",value:function(){var e=this.props,t=e.activeHandleID,n=e.handles,r=(0,e.children)({handles:void 0===n?[]:n,activeHandleID:void 0===t?"":t,getHandleProps:this.getHandleProps});return r&&a.default.Children.only(r)}}]),r}(),V=function(){function e(){l(this,e),this.interpolator=void 0,this.domain=[0,1],this.range=[0,1],this.domain=[0,1],this.range=[0,1],this.interpolator=null}return s(e,[{key:"createInterpolator",value:function(e,t){var n=this,r=e[0],o=e[1],a=t[0],i=t[1];return o<r?function(e){return n.interpolateValue(i,a)(n.deinterpolateValue(o,r)(e))}:function(e){return n.interpolateValue(a,i)(n.deinterpolateValue(r,o)(e))}}},{key:"interpolateValue",value:function(e,t){return t-=e=+e,function(n){return e+t*n}}},{key:"deinterpolateValue",value:function(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(){return t}}},{key:"rescale",value:function(){return this.interpolator=null,this}},{key:"getValue",value:function(e){return(this.interpolator||(this.interpolator=this.createInterpolator(this.domain,this.range)))(+e)}},{key:"setDomain",value:function(e){return this.domain=[e[0],e[1]],this.rescale(),this}},{key:"getDomain",value:function(){return this.domain}},{key:"setRange",value:function(e){return this.range=[e[0],e[1]],this}},{key:"getRange",value:function(){return this.range}},{key:"getTicks",value:function(e){var t=this.domain;return n.ticks(t[0],t[t.length-1],e||10)}}]),e}(),L=function(){return{value:0,percent:0}},U=function(e){d(r,t.Component);var n=y(r);function r(){return l(this,r),n.apply(this,arguments)}return s(r,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.values,r=e.scale,o=void 0===r?new V:r,i=e.count,u=e.getEventData,l=e.activeHandleID,c=t({getEventData:void 0===u?L:u,activeHandleID:void 0===l?"":l,ticks:(n||o.getTicks(void 0===i?10:i)).map((function(e){return{id:"$$-".concat(e),value:e,percent:o.getValue(e)}}))});return c&&a.default.Children.only(c)}}]),r}(),_=function(){return{value:0,percent:0}},$=function(e){d(r,t.Component);var n=y(r);function r(){var e;l(this,r);for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return(e=n.call.apply(n,[this].concat(o))).getTrackProps=function(t){var n=e.props,r=n.emitMouse,o=n.emitTouch;return u(u({},t||{}),{},{onMouseDown:x(t&&t.onMouseDown,r),onTouchStart:x(t&&t.onTouchStart,o)})},e}return s(r,[{key:"render",value:function(){for(var e=this.getTrackProps,t=this.props,n=t.children,r=t.left,o=void 0===r||r,i=t.right,u=void 0===i||i,l=t.scale,c=void 0===l?new V:l,s=t.handles,v=void 0===s?[]:s,d=t.getEventData,f=void 0===d?_:d,p=t.activeHandleID,h=void 0===p?"":p,m=c.getDomain(),y=[],g=0;g<v.length+1;g++){var b=v[g-1],D=v[g];0===g&&!0===o?b={id:"$",value:m[0],percent:0}:g===v.length&&!0===u&&(D={id:"$",value:m[1],percent:100}),b&&D&&y.push({id:"".concat(b.id,"-").concat(D.id),source:b,target:D})}var k=n({getEventData:f,activeHandleID:h,tracks:y,getTrackProps:e});return k&&a.default.Children.only(k)}}]),r}();function K(e,t,n){return Math.min(Math.max(e,t),n)}var X=s((function e(){var t=this;l(this,e),this.step=1,this.domain=[0,1],this.range=[0,1],this.setDomain=function(e){return t.domain=[e[0],e[1]],t},this.setRange=function(e){return t.range=[e[0],e[1]],t},this.setStep=function(e){return t.step=e,t},this.getValue=function(e){var n=g(t.domain,2),r=n[0],o=n[1],a=g(t.range,2),i=a[0],u=a[1],l=t.step,c=(K(e,r,o)-r)/(o-r);return K(l*Math.round(c*(u-i)/l)+i,i<u?i:u,u>i?u:i)}})),Y="undefined"!=typeof window&&"undefined"!=typeof document,q=function(){},B=function(e,t,n,r){var o=r?e-t:e+t;return r?Math.max(n[0],o):Math.min(n[1],o)},F=function(e,t,n,r){var o=r?e+t:e-t;return r?Math.min(n[1],o):Math.max(n[0],o)},N=[0,100],W=function(e){d(r,t.PureComponent);var n=y(r);function r(){var e;l(this,r);for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return(e=n.call.apply(n,[this].concat(o))).state={step:.1,values:[],domain:N,handles:[],reversed:!1,activeHandleID:"",valueToPerc:null,valueToStep:null,pixelToStep:null},e.slider=a.default.createRef(),e.onKeyDown=function(t,n){var r=["ArrowRight","ArrowUp"],o=["ArrowDown","ArrowLeft"],a=h(e),i=a.state.handles,u=a.props,l=u.step,c=void 0===l?.1:l,s=u.reversed,v=void 0!==s&&s,d=u.vertical,f=void 0!==d&&d,p=u.domain,m=void 0===p?[0,100]:p,y=t.key||"".concat(t.keyCode);if(r.concat(o).includes(y)){if(f){var g=[o,r];r=g[0],o=g[1]}t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault();var b=i.find((function(e){return e.key===n}));if(b){var D=b.val,k=D;r.includes(y)?k=B(D,c,m,v):o.includes(y)&&(k=F(D,c,m,v));var w=i.map((function(e){return e.key===n?{key:e.key,val:k}:e}));e.submitUpdate(w,!0)}}},e.onMouseDown=function(t,n){e.onStart(t,n,!1)},e.onTouchStart=function(t,n){M(t)||e.onStart(t,n,!0)},e.getEventData=function(t,n){var r,o=h(e),a=o.state,i=a.pixelToStep,u=a.valueToPerc,l=o.props.vertical;return i.setDomain(S(e.slider.current,l)),n&&t instanceof TouchEvent?r=i.getValue(P(l,t)):t instanceof MouseEvent&&(r=i.getValue(l?t.clientY:t.pageX)),{value:r,percent:u.getValue(r)}},e.onMouseMove=function(t){var n=h(e),r=n.state,o=r.handles,a=r.pixelToStep,i=r.activeHandleID,u=void 0===i?"":i,l=n.props,c=l.vertical,s=l.reversed,v=void 0!==s&&s;a.setDomain(S(e.slider.current,c));var d=E(o,u,a.getValue(c?t.clientY:t.pageX),v);e.submitUpdate(d)},e.onTouchMove=function(t){var n=h(e),r=n.state,o=r.handles,a=r.pixelToStep,i=r.activeHandleID,u=n.props,l=u.vertical,c=u.reversed;if(null!==a&&!M(t)){a.setDomain(S(e.slider.current,l));var s=E(o,i,a.getValue(P(l,t)),c);e.submitUpdate(s)}},e.onMouseUp=function(){var t=h(e),n=t.state,r=n.handles,o=void 0===r?[]:r,a=n.activeHandleID,i=t.props,u=i.onChange,l=i.onSlideEnd,c=void 0===l?q:l;(void 0===u?q:u)(o.map((function(e){return e.val}))),c(o.map((function(e){return e.val})),{activeHandleID:a}),e.setState({activeHandleID:""}),Y&&(document.removeEventListener("mousemove",e.onMouseMove),document.removeEventListener("mouseup",e.onMouseUp))},e.onTouchEnd=function(){var t=h(e),n=t.state,r=n.handles,o=n.activeHandleID,a=t.props,i=a.onChange,u=a.onSlideEnd,l=void 0===u?q:u;(void 0===i?q:i)(r.map((function(e){return e.val}))),l(r.map((function(e){return e.val})),{activeHandleID:o}),e.setState({activeHandleID:""}),Y&&(document.removeEventListener("touchmove",e.onTouchMove),document.removeEventListener("touchend",e.onTouchEnd))},e}return s(r,[{key:"componentDidMount",value:function(){this.state.pixelToStep.setDomain(S(this.slider.current,this.props.vertical))}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"removeListeners",value:function(){Y&&(document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"onStart",value:function(e,t,n){var r=this.state.handles,o=this.props.onSlideStart,a=void 0===o?q:o;n||e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),r.find((function(e){return e.key===t}))?(this.setState({activeHandleID:t}),a(r.map((function(e){return e.val})),{activeHandleID:t}),n?this.addTouchEvents():this.addMouseEvents()):(this.setState({activeHandleID:""}),this.handleRailAndTrackClicks(e,n))}},{key:"handleRailAndTrackClicks",value:function(e,t){var n,r=this,o=this.state,a=o.handles,i=o.pixelToStep,u=this.props,l=u.vertical,c=u.reversed,s=void 0!==c&&c;i.setDomain(S(this.slider.current,l)),n=i.getValue(t?P(l,e):l?e.clientY:e.pageX);for(var v="",d=Infinity,f=0;f<a.length;f++){var p=a[f],h=p.key,m=Math.abs(p.val-n);m<d&&(v=h,d=m)}var y=E(a,v,n,s);this.setState({activeHandleID:v},(function(){r.submitUpdate(y,!0),t?r.addTouchEvents():r.addMouseEvents()}))}},{key:"addMouseEvents",value:function(){Y&&(document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp))}},{key:"addTouchEvents",value:function(){Y&&(document.addEventListener("touchmove",this.onTouchMove),document.addEventListener("touchend",this.onTouchEnd))}},{key:"submitUpdate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.props,r=n.mode,a=void 0===r?1:r,i=n.step,u=void 0===i?.1:i,l=n.onUpdate,c=void 0===l?q:l,s=n.onChange,v=void 0===s?q:s,d=n.reversed,f=void 0!==d&&d,p=this.state.valueToStep.getValue;this.setState((function(n){var r=n.handles,i=[];if("function"==typeof a)i=a(r,e,u,f,p),o.default(Array.isArray(i),"Custom mode function did not return an array.");else switch(a){case 1:i=I(0,e);break;case 2:i=j(r,e);break;case 3:i=H(r,e,u,f,p);break;default:i=e,o.default(!1,"".concat(w," Invalid mode value."))}return c(i.map((function(e){return e.val}))),t&&v(i.map((function(e){return e.val}))),{handles:i}}))}},{key:"render",value:function(){var e=this,n=this.state,r=n.valueToPerc,o=n.activeHandleID,i=this.props,l=i.className,c=i.rootStyle,s=void 0===c?{}:c,v=i.rootProps,d=void 0===v?{}:v,f=i.component,p=void 0===f?"div":f,h=i.disabled,m=void 0!==h&&h,y=i.flatten,g=void 0!==y&&y,b=n.handles.map((function(e){var t=e.val;return{id:e.key,value:t,percent:r.getValue(t)}})),D=a.default.Children.map(this.props.children,(function(n){return!0===function(e){if(!t.isValidElement(e))return!1;var n=e.type,r=n?n.name:"";return r===A.name||r===R.name||r===U.name||r===$.name}(n)?a.default.cloneElement(n,{scale:r,handles:b,activeHandleID:o,getEventData:e.getEventData,emitKeyboard:m?q:e.onKeyDown,emitMouse:m?q:e.onMouseDown,emitTouch:m?q:e.onTouchStart}):n}));return g?a.default.createElement(a.default.Fragment,null,a.default.createElement(p,u(u({},d),{},{style:s,className:l,ref:this.slider})),D):a.default.createElement(a.default.Fragment,null,a.default.createElement(p,u(u({},d),{},{style:s,className:l,ref:this.slider}),D))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n,r,a=e.step,i=void 0===a?.1:a,u=e.values,l=e.domain,c=void 0===l?N:l,s=e.reversed,v=void 0!==s&&s,d=e.onUpdate,f=void 0===d?q:d,p=e.onChange,h=void 0===p?q:p,m=e.warnOnChanges,y=void 0!==m&&m,D=t.valueToPerc,k=t.valueToStep,T=t.pixelToStep,E={};if(D&&k&&T||(D=new V,k=new X,T=new X,E.valueToPerc=D,E.valueToStep=k,E.pixelToStep=T),t.domain===N||null===t.step||null===t.domain||null===t.reversed||i!==t.step||c[0]!==t.domain[0]||c[1]!==t.domain[1]||v!==t.reversed){var S=g(c,2),M=S[0],P=S[1];k.setStep(i).setRange([M,P]).setDomain([M,P]),!0===v?(D.setDomain([M,P]).setRange([100,0]),T.setStep(i).setRange([P,M])):(D.setDomain([M,P]).setRange([0,100]),T.setStep(i).setRange([M,P])),o.default(P>M,"".concat(w," Max must be greater than min (even if reversed). Max is ").concat(P,". Min is ").concat(M,"."));var I=O(u||t.values,v,k,y),j=I.handles;(I.changes||void 0===u||u===t.values)&&(f(j.map((function(e){return e.val}))),h(j.map((function(e){return e.val})))),E.step=i,E.values=u,E.domain=c===N?b(c):c,E.handles=j,E.reversed=v}else if(!((n=u)===(r=t.values)||n.length===r.length&&n.reduce(function(e){return function(t,n,r){return t&&e[r]===n}}(r),!0))){var H=O(u,v,k,y),x=H.handles;H.changes&&(f(x.map((function(e){return e.val}))),h(x.map((function(e){return e.val})))),E.values=u,E.handles=x}return Object.keys(E).length?E:null}}]),r}();exports.Handles=A,exports.Rail=R,exports.Slider=W,exports.Ticks=U,exports.Tracks=$,exports.mode1=I,exports.mode2=j,exports.mode3=H;
//# sourceMappingURL=rcs.cjs.production.min.js.map
